# Render.com Blueprint for Nelo Marketplace  
# Backends Only - Frontend is deployed to Vercel

services:
  # PHP Backend (Docker)
  - type: web
    name: nelo-php-backend
    env: docker
    dockerfilePath: ./Dockerfile.php
    plan: free
    envVars:
      - key: VITE_SUPABASE_URL
        value: https://nzyuwfxghaujzzfjewze.supabase.co
      - key: VITE_SUPABASE_ANON_KEY
        sync: false
      - key: DB_CONNECTION
        value: pgsql
      - key: DB_HOST
        value: db.nzyuwfxghaujzzfjewze.supabase.co
      - key: DB_PORT
        value: 5432
      - key: DB_USER
        value: postgres  
      - key: DB_PASS
        sync: false
      - key: DB_NAME
        value: postgres
      - key: FLW_PUBLIC_KEY
        sync: false
      - key: FLW_SECRET_HASH
        sync: false
      - key: SMTP_HOST
        sync: false
      - key: SMTP_PORT
        value: 587
      - key: SMTP_USER
        sync: false
      - key: SMTP_PASS
        sync: false
      - key: SMTP_FROM_EMAIL
        value: no-reply@nelo.cg
      - key: SMTP_FROM_NAME
        value: Nelo Marketplace
      - key: APP_ENV
        value: production
      - key: APP_DEBUG
        value: false
      - key: CORS_ORIGIN
        value: https://nelo-marketplace.vercel.app

  # Node.js Backend
  - type: web
    name: nelo-node-backend
    env: node
    plan: free
    rootDir: server
    buildCommand: npm install && npm run build
    startCommand: npm start
    envVars:
      - key: PORT
        value: 10000
      - key: DATABASE_URL
        sync: false
      - key: VITE_SUPABASE_URL
        value: https://nzyuwfxghaujzzfjewze.supabase.co
      - key: VITE_SUPABASE_ANON_KEY
        sync: false
      - key: STRIPE_SECRET_KEY
        sync: false
      - key: NODE_ENV
        value: production
      - key: FRONTEND_URL
        value: https://nelo-marketplace.vercel.app
      - key: CORS_ORIGIN
        value: https://nelo-marketplace.vercel.app
